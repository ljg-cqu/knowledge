1. Q: 某团队计划应对 CVE-2025-60724："我们将在下周五晚上统一重启所有服务器安装补丁，预计 2 小时内完成。" 这个计划有什么问题？如何改进？
   A: 
   - **问题**：(a) 未进行测试验证，直接在生产环境全量部署存在兼容性风险；(b) "统一重启所有服务器"可能导致完全业务中断，未考虑分批或蓝绿部署；(c) 无回滚计划。
   - **影响**：若补丁导致关键应用崩溃（如数据库、中间件不兼容），2 小时停机可能演变为 8+ 小时故障，业务损失可达数十万美元。
   - **改进**：先在隔离测试环境验证补丁兼容性 → 制定分阶段部署计划（先测试 10% 服务器，监控 24 小时）→ 准备回滚流程（快照/镜像备份）→ 通知业务部门并获得批准。

1. Q: 某架构师提议："Azure Linux 2.0 EOL 后，我们可以暂时不迁移，因为容器本身已经隔离，不需要担心宿主机 OS 的安全问题。" 这个推理有什么错误？
   A: 
   - **问题**：(a) 容器共享宿主机内核，Linux 内核漏洞（如容器逃逸 CVE）可突破容器隔离，直接威胁宿主机和所有容器；(b) 无安全更新的 OS 会累积漏洞，攻击面持续扩大；(c) 合规审计会将无支持 OS 标记为高风险。
   - **影响**：一旦发生容器逃逸攻击，攻击者可接管整个 Kubernetes 节点，窃取所有容器的敏感数据（如密钥、数据库凭证）。
   - **改进**：容器隔离不能替代宿主机安全，必须在 EOL 前完成 OS 迁移；若时间紧迫，可临时部署 Kata Containers 或 gVisor 提供 VM 级隔离作为过渡方案。

1. Q: 某安全团队制定 Chrome 零日漏洞响应计划："我们发送邮件通知所有员工立即更新 Chrome，并在邮件中附上更新链接。" 这个计划有什么安全隐患？
   A: 
   - **问题**：(a) 邮件中的"更新链接"可能被钓鱼攻击模仿，员工难以区分真假邮件，反而增加钓鱼风险；(b) 依赖员工手动操作，执行率通常 <60%，无法保证覆盖率；(c) 无法验证更新是否成功。
   - **影响**：攻击者可发送伪造的"安全更新邮件"，诱导员工下载恶意软件；大量员工未及时更新，仍暴露在零日漏洞风险中。
   - **改进**：使用 MDM/GPO 强制自动推送更新，无需员工手动操作 → 发送的邮件仅包含"系统将自动更新"通知，不附带任何链接 → 使用 SIEM 监控更新成功率，对未更新终端发送二次提醒。

1. Q: 某 SRE 团队评估可观测性方案："Prometheus 可以存储所有日志、指标和追踪数据，我们只需要部署 Prometheus 就够了。" 这个理解有什么错误？
   A: 
   - **问题**：(a) Prometheus 设计为时间序列指标存储，不适合存储高基数日志数据（文本日志会导致性能问题和存储爆炸）；(b) Prometheus 不支持分布式追踪（trace spans），需要 Jaeger/Tempo；(c) 缺乏可视化能力，Prometheus 自带 UI 功能有限。
   - **影响**：强行将日志写入 Prometheus 会导致查询性能下降、存储成本激增、无法进行全文日志搜索和链路追踪，最终导致可观测性系统不可用。
   - **改进**：分层架构：Prometheus 存储指标 → Loki/Elasticsearch 存储日志 → Jaeger/Tempo 存储追踪 → Grafana 统一可视化 → OpenTelemetry 统一采集。

1. Q: 某工程经理计划应对 Azure 成本增加："我们立即将所有工作负载迁移到 AWS，Azure 的价格变化让我们无法继续使用。" 这个决策有什么问题？
   A: 
   - **问题**：(a) 迁移成本被低估，跨云迁移需要重新架构（如 Azure-specific 服务替换）、数据迁移、团队培训，成本可能达 $100K+；(b) 未评估 AWS 是否也会调整定价策略；(c) 忽略了优化当前 Azure 使用的可能性（如关闭闲置资源可节省 15-20%）。
   - **影响**：迁移周期可能长达 6-12 个月，期间运维复杂度激增（多云管理）、团队生产力下降、潜在的业务中断风险，总成本可能高于继续使用 Azure。
   - **改进**：先执行成本审计，识别快速优化机会（闲置资源、SKU 调整、预留实例）→ 与 Microsoft 重新谈判折扣 → 若仍无法接受，制定 3-6 个月的渐进式多云迁移计划，而非"一刀切"。

1. Q: 某开发者部署可观测性埋点："为了确保不遗漏任何问题，我在每个函数的入口和出口都添加了日志和追踪 span，采样率设置为 100%。" 这个做法有什么问题？
   A: 
   - **问题**：(a) 100% 采样率在高流量系统中会产生海量追踪数据，导致存储成本激增和 Jaeger 后端性能问题；(b) 过度埋点增加代码噪音和维护负担；(c) 大量低价值日志（如健康检查、正常请求）淹没关键错误信息。
   - **影响**：可观测性系统本身成为性能瓶颈（额外延迟 >50ms），存储成本每月可能增加数千美元，告警噪音导致真实故障被忽略（"狼来了"效应）。
   - **改进**：实施智能采样（如尾部采样，仅保留错误请求和慢请求的完整链路）→ 采样率根据服务重要性分层（核心服务 10%，边缘服务 1%）→ 使用结构化日志而非无节制打印 → 定期审查和清理低价值日志。

1. Q: 某 DevOps 工程师配置 AKS 节点池迁移："我先删除旧的 Azure Linux 2.0 节点池，然后创建新的 Ubuntu 22.04 节点池，让 Kubernetes 自动重新调度 Pod。" 这个操作顺序有什么风险？
   A: 
   - **问题**：(a) 先删除节点池会导致所有 Pod 被驱逐，若新节点池创建失败或容量不足，会导致服务完全不可用；(b) 未考虑 StatefulSet、DaemonSet 的特殊处理；(c) 无回滚路径。
   - **影响**：在节点池切换期间，所有工作负载中断 5-15 分钟，若新节点池启动失败（如镜像拉取超时、资源配额不足），停机时间可能延长至数小时。
   - **改进**：使用蓝绿部署策略：(1) 先创建新 Ubuntu 节点池并验证健康状态 → (2) 逐步 cordon 和 drain 旧节点，让 Pod 迁移至新节点 → (3) 验证所有关键服务正常后再删除旧节点池 → (4) 保留旧节点池配置快照以便快速回滚。

1. Q: 某团队制定补丁管理策略："我们将所有补丁都标记为自动安装，这样可以确保系统始终处于最新状态，无需人工干预。" 这个策略有什么潜在风险？
   A: 
   - **问题**：(a) 自动安装所有补丁可能在业务高峰期触发重启，导致意外停机；(b) 未经测试的补丁可能与业务应用不兼容，自动部署会导致生产故障；(c) 无法控制补丁部署速度，无法快速响应回滚需求。
   - **影响**：某个不兼容补丁自动推送至 1000+ 服务器，导致关键服务集体宕机，回滚需数小时，业务损失可达数百万美元（真实案例：CrowdStrike 2024 年全球宕机事件）。
   - **改进**：分层策略：关键业务系统采用"手动审批 + 测试验证"流程 → 非关键系统可自动安装，但限制在维护窗口（如凌晨 2-4 点）→ 使用补丁管理工具（如 WSUS）分阶段推送（10% → 50% → 100%）→ 建立快速回滚机制。
